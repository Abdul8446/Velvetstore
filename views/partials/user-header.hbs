<!--================Menu Area =================-->
<header class="shop_header_area carousel_menu_area">
    <div class="carousel_top_header row m0">
        <div class="container">
            <div class="carousel_top_h_inner">
                <div class="float-md-left">
                    <div class="top_header_left">
                        <div class="selector">
                            {{#if userExist}}
                            <select class="language_drop" name="countries" id="countries" style="width:300px;">
                                <option value='yt' data-image="img/icon/flag-1.png" data-imagecss="flag yt"
                                    data-title="English">English</option>
                                <option value='yu' data-image="img/icon/flag-1.png" data-imagecss="flag yu"
                                    data-title="Bangladesh">Bangla</option>
                                <option value='yt' data-image="img/icon/flag-1.png" data-imagecss="flag yt"
                                    data-title="English">English</option>
                                <option value='yu' data-image="img/icon/flag-1.png" data-imagecss="flag yu"
                                    data-title="Bangladesh">Bangla</option>
                            </select>
                            {{/if}}
                            {{#if proDetails}}
                            <select class="language_drop" name="countries" id="countries" style="width:300px;">
                                <option value='yt' data-image="/img/icon/flag-1.png" data-imagecss="flag yt"
                                    data-title="English">English</option>
                                <option value='yu' data-image="/img/icon/flag-1.png" data-imagecss="flag yu"
                                    data-title="Bangladesh">Bangla</option>
                                <option value='yt' data-image="/img/icon/flag-1.png" data-imagecss="flag yt"
                                    data-title="English">English</option>
                                <option value='yu' data-image="/img/icon/flag-1.png" data-imagecss="flag yu"
                                    data-title="Bangladesh">Bangla</option>
                            </select>
                            {{/if}}
                        </div>
                        <select class="selectpicker usd_select">
                            <option>USD</option>
                            <option>$</option>
                            <option>$</option>
                        </select>
                    </div>
                </div>
                <div class="float-md-right">
                    <div class="top_header_middle">
                        <a href="#"><i class="fa fa-phone"></i> Call Us: <span>+84 987 654 321</span></a>
                        <a href="#"><i class="fa fa-envelope"></i> Email: <span>support@yourdomain.com</span></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="carousel_menu_inner">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                {{!-- <a class="navbar-brand p-0" style="border-radius: 50px;background: black;"> --}}
                    {{!-- <h2 class="text-danger">ğŸ…¥ğŸ…”ğŸ…›ğŸ…¥ğŸ…”ğŸ…£</h2>
                    <h5><sub>ğŸ…¢ğŸ…£ğŸ…ğŸ…¡ğŸ…”</sub></h5> --}}
                    {{!-- <h1 style="color: purple;">ğ“¿ğ“®ğ“µğ“¿ğ“®ğ“½ğ“¼ğ“½ğ“¸ğ“»ğ“®</h1> --}}
                    <h4 style="color:;">ğŸ†…ğŸ…´ğŸ…»ğŸ†…ğŸ…´ğŸ†ƒğŸ†‚ğŸ†ƒğŸ…¾ğŸ†ğŸ…´</h4>
                    {{!-- <h1 style=";">ğŸ……ğŸ„´ğŸ„»ğŸ……ğŸ„´ğŸ…ƒğŸ…‚ğŸ…ƒğŸ„¾ğŸ…ğŸ„´</h1> --}}
                    {{!-- <h2 class="">ğ™‘ğ™€ğ™‡ğ™‘ğ™€ğ™</h2>
                    <h5><sub class="text-danger">ğ™ğ™ğ™Šğ™ğ™€</sub></h5> --}}
                    {{!--
                </a> --}}
                {{!-- {{#if userExist}}
                <a class="navbar-brand" href="#"><img src="img/logo.png" alt=""></a>
                {{/if}}
                {{#if proDetails}}
                <a class="navbar-brand" href="#"><img src="/img/logo.png" alt=""></a>
                {{/if}} --}}
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>

                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        <li class="nav-item dropdown submenu">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                {{#if user}}
                                {{user.username}}
                                {{else}}
                                Account
                                {{/if}}
                                <i class="fa fa-angle-down" aria-hidden="true"></i>
                            </a>
                            <ul class="dropdown-menu">
                                {{#if user}}
                                <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
                                {{else}}
                                <li class="nav-item"><a class="nav-link" href="/login">Login</a></li>
                                <li class="nav-item"><a class="nav-link" href="/signup">Signup</a></li>
                                {{/if}}
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="/shop/?page=1&limit=6">
                                Shop</i>
                            </a>
                            {{!-- <ul class="dropdown-menu">
                                <li class="nav-item"><a class="nav-link" href="">Shop By Category</a>
                                </li>
                            </ul> --}}
                        </li>
                        {{!-- <li class="nav-item"><a class="nav-link" href="#">Blog</a></li> --}}
                        {{!-- <li class="nav-item"><a class="nav-link" href="#">lookbook</a></li> --}}
                        {{!-- <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li> --}}
                        {{!--
                    </ul> --}}
                    {{!-- <ul class="navbar-nav justify-content-end"> --}}
                        {{!-- <li class="search_icon"><a href="#"><i class="icon-magnifier icons"></i></a></li> --}}
                        <li class="nav-item"><a class="nav-link" href="/wishlist">
                                Wishlist<i class="icon_heart_alt"></i><span style="background: rgb(223, 3, 3);color:white;font-size:x-small;
                                margin-left: -2px;" class="badge rounded-circle" id="wish-count">{{wishCount}}</span>
                            </a>
                        </li>
                        <li class="user_icon"><a href="/my-account">Profile<i class="icon-user icons"></i></a></li>
                        <li class=""><a href="/orders">Orders<i class="icon-basket-loaded"></i></a></li>
                        <li><a href="/cart">
                                Cart<i class="icon-basket"></i></a>
                            <span style="background: rgb(223, 3, 3);color:white;font-size:x-small;
                                margin-left: -6px;" class="badge rounded-circle" id="cart-count">{{cartCount}}</span>
                            {{!-- <span
                                style="background: rgb(223, 3, 3);color:white;font-size:x-small;margin-left: -2px;"
                                class="badge rounded-circle mx-3 my-3" id="cart-count">{{cartCount}}</span> --}}
                        </li>
                        {{#if user}}
                        <li class="dropdown" style="margin-left: -10px;"><a onclick="getWalletBalance('{{user._id}}')"
                                class="dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false" style="cursor: pointer;">
                                Wallet<i class="icon-wallet"></i></a>
                            <div class="bg-dark dropdown-menu dropdown-menu-right rounded-0 "
                                aria-labelledby="dropdownMenuLink">
                                <div class="d-flex justify-content-center mt-3 mb-1 mr-1 text-white"> Balance: â‚¹<span
                                        id="walletbalance" class="text-white"></span></div>
                                <button onclick="showWalletHistory('{{user._id}}')" class="btn btn-secondary ml-2"
                                    data-toggle="modal" data-target="#exampleModalLong">View Historyâ†’</button>
                            </div>
                        </li>
                        {{/if}}
                    </ul>
                </div>
            </nav>
        </div>
    </div>
</header>



<!-- Modal -->
<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Wallet History</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Transaction</th>
                                <th>Amount</th>
                                <th>Balance</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">

                            <tr>
                                <td>10.10.10</td>
                                <td>return</td>
                                <td>-254</td>
                                <td>406</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<script>
    function getWalletBalance(userId) {
        $.ajax({
            url: '/get-wallet-balance/' + userId,
            method:'get',
            success: (response) => {
                document.getElementById('walletbalance').innerHTML = response.walletbalance
            }
        })
    }

    function showWalletHistory(userId) {
        $.ajax({
            url: '/get-wallet-history/' + userId,
            method:'get',
            success: (response) => {
                let length = response.transaction.length
                console.log(length)
                let tableBody = document.getElementById('table-body')
                tableBody.innerHTML = ``
                for (let i = 0; i < length; i++) {
                    tableBody.innerHTML += `<tr>
                                <td>${response.transaction[i].date}</td>
                                <td>${response.transaction[i].transaction}</td>
                                <td>${response.transaction[i].amount}</td>
                                <td>${response.transaction[i].balance}</td>
                                </tr>`
                }
            }
        })

    }
</script>